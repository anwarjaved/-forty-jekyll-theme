{"version":3,"file":"hint.es2-c7ed0681.js","sources":["../../node_modules/@graphiql/react/dist/hint.es2.js"],"sourcesContent":["var __defProp = Object.defineProperty;\nvar __name = (target, value) => __defProp(target, \"name\", { value, configurable: true });\nimport { C as CodeMirror } from \"./codemirror.es.js\";\nimport { getNamedType, GraphQLInputObjectType, GraphQLEnumType, GraphQLBoolean, getNullableType, GraphQLList } from \"graphql\";\nimport { f as forEachState } from \"./forEachState.es.js\";\nimport \"./index.es.js\";\nimport \"react\";\nimport \"react-dom\";\nfunction hintList(cursor, token, list) {\n  const hints = filterAndSortList(list, normalizeText(token.string));\n  if (!hints) {\n    return;\n  }\n  const tokenStart = token.type !== null && /\"|\\w/.test(token.string[0]) ? token.start : token.end;\n  return {\n    list: hints,\n    from: { line: cursor.line, ch: tokenStart },\n    to: { line: cursor.line, ch: token.end }\n  };\n}\n__name(hintList, \"hintList\");\nfunction filterAndSortList(list, text) {\n  if (!text) {\n    return filterNonEmpty(list, (entry) => !entry.isDeprecated);\n  }\n  const byProximity = list.map((entry) => ({\n    proximity: getProximity(normalizeText(entry.text), text),\n    entry\n  }));\n  const conciseMatches = filterNonEmpty(filterNonEmpty(byProximity, (pair) => pair.proximity <= 2), (pair) => !pair.entry.isDeprecated);\n  const sortedMatches = conciseMatches.sort((a, b) => (a.entry.isDeprecated ? 1 : 0) - (b.entry.isDeprecated ? 1 : 0) || a.proximity - b.proximity || a.entry.text.length - b.entry.text.length);\n  return sortedMatches.map((pair) => pair.entry);\n}\n__name(filterAndSortList, \"filterAndSortList\");\nfunction filterNonEmpty(array, predicate) {\n  const filtered = array.filter(predicate);\n  return filtered.length === 0 ? array : filtered;\n}\n__name(filterNonEmpty, \"filterNonEmpty\");\nfunction normalizeText(text) {\n  return text.toLowerCase().replace(/\\W/g, \"\");\n}\n__name(normalizeText, \"normalizeText\");\nfunction getProximity(suggestion, text) {\n  let proximity = lexicalDistance(text, suggestion);\n  if (suggestion.length > text.length) {\n    proximity -= suggestion.length - text.length - 1;\n    proximity += suggestion.indexOf(text) === 0 ? 0 : 0.5;\n  }\n  return proximity;\n}\n__name(getProximity, \"getProximity\");\nfunction lexicalDistance(a, b) {\n  let i;\n  let j;\n  const d = [];\n  const aLength = a.length;\n  const bLength = b.length;\n  for (i = 0; i <= aLength; i++) {\n    d[i] = [i];\n  }\n  for (j = 1; j <= bLength; j++) {\n    d[0][j] = j;\n  }\n  for (i = 1; i <= aLength; i++) {\n    for (j = 1; j <= bLength; j++) {\n      const cost = a[i - 1] === b[j - 1] ? 0 : 1;\n      d[i][j] = Math.min(d[i - 1][j] + 1, d[i][j - 1] + 1, d[i - 1][j - 1] + cost);\n      if (i > 1 && j > 1 && a[i - 1] === b[j - 2] && a[i - 2] === b[j - 1]) {\n        d[i][j] = Math.min(d[i][j], d[i - 2][j - 2] + cost);\n      }\n    }\n  }\n  return d[aLength][bLength];\n}\n__name(lexicalDistance, \"lexicalDistance\");\nCodeMirror.registerHelper(\"hint\", \"graphql-variables\", (editor, options) => {\n  const cur = editor.getCursor();\n  const token = editor.getTokenAt(cur);\n  const results = getVariablesHint(cur, token, options);\n  if ((results === null || results === void 0 ? void 0 : results.list) && results.list.length > 0) {\n    results.from = CodeMirror.Pos(results.from.line, results.from.ch);\n    results.to = CodeMirror.Pos(results.to.line, results.to.ch);\n    CodeMirror.signal(editor, \"hasCompletion\", editor, results, token);\n  }\n  return results;\n});\nfunction getVariablesHint(cur, token, options) {\n  const state = token.state.kind === \"Invalid\" ? token.state.prevState : token.state;\n  const { kind, step } = state;\n  if (kind === \"Document\" && step === 0) {\n    return hintList(cur, token, [{ text: \"{\" }]);\n  }\n  const { variableToType } = options;\n  if (!variableToType) {\n    return;\n  }\n  const typeInfo = getTypeInfo(variableToType, token.state);\n  if (kind === \"Document\" || kind === \"Variable\" && step === 0) {\n    const variableNames = Object.keys(variableToType);\n    return hintList(cur, token, variableNames.map((name) => ({\n      text: `\"${name}\": `,\n      type: variableToType[name]\n    })));\n  }\n  if ((kind === \"ObjectValue\" || kind === \"ObjectField\" && step === 0) && typeInfo.fields) {\n    const inputFields = Object.keys(typeInfo.fields).map((fieldName) => typeInfo.fields[fieldName]);\n    return hintList(cur, token, inputFields.map((field) => ({\n      text: `\"${field.name}\": `,\n      type: field.type,\n      description: field.description\n    })));\n  }\n  if (kind === \"StringValue\" || kind === \"NumberValue\" || kind === \"BooleanValue\" || kind === \"NullValue\" || kind === \"ListValue\" && step === 1 || kind === \"ObjectField\" && step === 2 || kind === \"Variable\" && step === 2) {\n    const namedInputType = typeInfo.type ? getNamedType(typeInfo.type) : void 0;\n    if (namedInputType instanceof GraphQLInputObjectType) {\n      return hintList(cur, token, [{ text: \"{\" }]);\n    }\n    if (namedInputType instanceof GraphQLEnumType) {\n      const values = namedInputType.getValues();\n      return hintList(cur, token, values.map((value) => ({\n        text: `\"${value.name}\"`,\n        type: namedInputType,\n        description: value.description\n      })));\n    }\n    if (namedInputType === GraphQLBoolean) {\n      return hintList(cur, token, [\n        { text: \"true\", type: GraphQLBoolean, description: \"Not false.\" },\n        { text: \"false\", type: GraphQLBoolean, description: \"Not true.\" }\n      ]);\n    }\n  }\n}\n__name(getVariablesHint, \"getVariablesHint\");\nfunction getTypeInfo(variableToType, tokenState) {\n  const info = {\n    type: null,\n    fields: null\n  };\n  forEachState(tokenState, (state) => {\n    if (state.kind === \"Variable\") {\n      info.type = variableToType[state.name];\n    } else if (state.kind === \"ListValue\") {\n      const nullableType = info.type ? getNullableType(info.type) : void 0;\n      info.type = nullableType instanceof GraphQLList ? nullableType.ofType : null;\n    } else if (state.kind === \"ObjectValue\") {\n      const objectType = info.type ? getNamedType(info.type) : void 0;\n      info.fields = objectType instanceof GraphQLInputObjectType ? objectType.getFields() : null;\n    } else if (state.kind === \"ObjectField\") {\n      const objectField = state.name && info.fields ? info.fields[state.name] : null;\n      info.type = objectField === null || objectField === void 0 ? void 0 : objectField.type;\n    }\n  });\n  return info;\n}\n__name(getTypeInfo, \"getTypeInfo\");\n"],"names":["__defProp","__name","target","value","hintList","cursor","token","list","hints","filterAndSortList","normalizeText","tokenStart","text","filterNonEmpty","entry","byProximity","getProximity","pair","a","b","array","predicate","filtered","suggestion","proximity","lexicalDistance","i","j","d","aLength","bLength","cost","CodeMirror","editor","options","cur","results","getVariablesHint","state","kind","step","variableToType","typeInfo","getTypeInfo","variableNames","name","inputFields","fieldName","field","namedInputType","getNamedType","GraphQLInputObjectType","GraphQLEnumType","values","GraphQLBoolean","tokenState","info","forEachState","nullableType","getNullableType","GraphQLList","objectType","objectField"],"mappings":"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","x_google_ignoreList":[0]}